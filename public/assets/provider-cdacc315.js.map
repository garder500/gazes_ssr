{"version":3,"file":"provider-cdacc315.js","sources":["../../spa/node_modules/.pnpm/vidstack@0.6.14/node_modules/vidstack/dist/prod/providers/video/native-hls-text-tracks.js","../../spa/node_modules/.pnpm/vidstack@0.6.14/node_modules/vidstack/dist/prod/providers/video/picture-in-picture.js","../../spa/node_modules/.pnpm/vidstack@0.6.14/node_modules/vidstack/dist/prod/providers/video/presentation/video-presentation.js","../../spa/node_modules/.pnpm/vidstack@0.6.14/node_modules/vidstack/dist/prod/providers/video/provider.js"],"sourcesContent":["import { onDispose } from 'maverick.js';\nimport { G as TextTrack, Y as TEXT_TRACK_NATIVE, H as TEXT_TRACK_READY_STATE, Z as TEXT_TRACK_NATIVE_HLS } from '../../media-core.js';\n\nclass NativeHLSTextTracks {\n  constructor(_video, _context) {\n    this.aa = _video;\n    this.ph = _context;\n    _video.textTracks.onaddtrack = this.fa.bind(this);\n    onDispose(this.Hh.bind(this));\n  }\n  fa(event) {\n    const nativeTrack = event.track;\n    if (!nativeTrack || findTextTrackElement(this.aa, nativeTrack))\n      return;\n    const track = new TextTrack({\n      id: nativeTrack.id,\n      kind: nativeTrack.kind,\n      label: nativeTrack.label,\n      language: nativeTrack.language,\n      type: \"vtt\"\n    });\n    track[TEXT_TRACK_NATIVE] = { track: nativeTrack };\n    track[TEXT_TRACK_READY_STATE] = 2;\n    track[TEXT_TRACK_NATIVE_HLS] = true;\n    let lastIndex = 0;\n    const onCueChange = (event2) => {\n      if (!nativeTrack.cues)\n        return;\n      for (let i = lastIndex; i < nativeTrack.cues.length; i++) {\n        track.addCue(nativeTrack.cues[i], event2);\n        lastIndex++;\n      }\n    };\n    onCueChange(event);\n    nativeTrack.oncuechange = onCueChange;\n    this.ph.textTracks.add(track, event);\n    track.setMode(nativeTrack.mode, event);\n  }\n  Hh() {\n    this.aa.textTracks.onaddtrack = null;\n    for (const track of this.ph.textTracks) {\n      const nativeTrack = track[TEXT_TRACK_NATIVE]?.track;\n      if (nativeTrack?.oncuechange)\n        nativeTrack.oncuechange = null;\n    }\n  }\n}\nfunction findTextTrackElement(video, track) {\n  return Array.from(video.children).find((el) => el.track === track);\n}\n\nexport { NativeHLSTextTracks as N };\n","import { listenEvent } from 'maverick.js/std';\nimport { _ as canUsePictureInPicture } from '../../media-core.js';\n\nclass VideoPictureInPicture {\n  constructor(_video, _media) {\n    this.aa = _video;\n    this.k = _media;\n    listenEvent(this.aa, \"enterpictureinpicture\", this.ri.bind(this));\n    listenEvent(this.aa, \"leavepictureinpicture\", this.si.bind(this));\n  }\n  get active() {\n    return document.pictureInPictureElement === this.aa;\n  }\n  get supported() {\n    return canUsePictureInPicture(this.aa);\n  }\n  async enter() {\n    return this.aa.requestPictureInPicture();\n  }\n  exit() {\n    return document.exitPictureInPicture();\n  }\n  ri(event) {\n    this.Hc(true, event);\n  }\n  si(event) {\n    this.Hc(false, event);\n  }\n  Hc = (active, event) => {\n    this.k.delegate.R(\"picture-in-picture-change\", {\n      detail: active,\n      trigger: event\n    });\n  };\n}\n\nexport { VideoPictureInPicture as V };\n","import { listenEvent, DOMEvent } from 'maverick.js/std';\nimport { $ as canUseVideoPresentation } from '../../../media-core.js';\n\nclass VideoPresentation {\n  constructor(_video, _media) {\n    this.aa = _video;\n    this.k = _media;\n    listenEvent(this.aa, \"webkitpresentationmodechanged\", this.wi.bind(this));\n  }\n  Ga = \"inline\";\n  get vi() {\n    return canUseVideoPresentation(this.aa);\n  }\n  async ui(mode) {\n    if (this.Ga === mode)\n      return;\n    this.aa.webkitSetPresentationMode(mode);\n  }\n  wi() {\n    const prevMode = this.Ga;\n    this.Ga = this.aa.webkitPresentationMode;\n    this.k.player?.dispatchEvent(\n      new DOMEvent(\"video-presentation-change\", {\n        detail: this.Ga,\n        trigger: event\n      })\n    );\n    [\"fullscreen\", \"picture-in-picture\"].forEach((type) => {\n      if (this.Ga === type || prevMode === type) {\n        this.k.delegate.R(`${type}-change`, {\n          detail: this.Ga === type,\n          trigger: event\n        });\n      }\n    });\n  }\n}\nclass FullscreenPresentationAdapter {\n  constructor(_presentation) {\n    this.ti = _presentation;\n  }\n  get active() {\n    return this.ti.Ga === \"fullscreen\";\n  }\n  get supported() {\n    return this.ti.vi;\n  }\n  async enter() {\n    this.ti.ui(\"fullscreen\");\n  }\n  async exit() {\n    this.ti.ui(\"inline\");\n  }\n}\nclass PIPPresentationAdapter {\n  constructor(_presentation) {\n    this.ti = _presentation;\n  }\n  get active() {\n    return this.ti.Ga === \"picture-in-picture\";\n  }\n  get supported() {\n    return this.ti.vi;\n  }\n  async enter() {\n    this.ti.ui(\"picture-in-picture\");\n  }\n  async exit() {\n    this.ti.ui(\"inline\");\n  }\n}\n\nexport { FullscreenPresentationAdapter as F, PIPPresentationAdapter as P, VideoPresentation as V };\n","import { onDispose } from 'maverick.js';\nimport { $ as canUseVideoPresentation, _ as canUsePictureInPicture, X as canPlayHLSNatively, a0 as ATTACH_VIDEO } from '../../media-core.js';\nimport { H as HTMLMediaProvider } from '../html/provider.js';\nimport { N as NativeHLSTextTracks } from './native-hls-text-tracks.js';\nimport { V as VideoPictureInPicture } from './picture-in-picture.js';\nimport { V as VideoPresentation, F as FullscreenPresentationAdapter, P as PIPPresentationAdapter } from './presentation/video-presentation.js';\nimport 'maverick.js/element';\nimport 'maverick.js/std';\nimport '../type-check.js';\nimport '../audio/loader.js';\nimport 'maverick.js/dom';\nimport '../hls/loader.js';\nimport './loader.js';\nimport '../html/htmlâ€“media-events.js';\nimport '../hls/hls.js';\nimport '../../media-ui.js';\nimport '../../icons/icon.js';\nimport 'media-captions';\nimport '../html/native-audio-tracks.js';\n\nclass VideoProvider extends HTMLMediaProvider {\n  $$PROVIDER_TYPE = \"VIDEO\";\n  get type() {\n    return \"video\";\n  }\n  fullscreen;\n  pictureInPicture;\n  constructor(video, context) {\n    super(video);\n    if (canUseVideoPresentation(video)) {\n      const presentation = new VideoPresentation(video, context);\n      this.fullscreen = new FullscreenPresentationAdapter(presentation);\n      this.pictureInPicture = new PIPPresentationAdapter(presentation);\n    } else if (canUsePictureInPicture(video)) {\n      this.pictureInPicture = new VideoPictureInPicture(video, context);\n    }\n  }\n  setup(context) {\n    super.setup(context);\n    if (canPlayHLSNatively(this.video)) {\n      new NativeHLSTextTracks(this.video, context);\n    }\n    context.textRenderers[ATTACH_VIDEO](this.video);\n    onDispose(() => {\n      context.textRenderers[ATTACH_VIDEO](null);\n    });\n    if (this.type === \"video\")\n      context.delegate.R(\"provider-setup\", { detail: this });\n  }\n  /**\n   * The native HTML `<video>` element.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement}\n   */\n  get video() {\n    return this.k;\n  }\n}\n\nexport { VideoProvider };\n"],"names":["NativeHLSTextTracks","_video","_context","onDispose","event","nativeTrack","findTextTrackElement","track","TextTrack","TEXT_TRACK_NATIVE","TEXT_TRACK_READY_STATE","TEXT_TRACK_NATIVE_HLS","lastIndex","onCueChange","event2","i","_a","video","el","VideoPictureInPicture","_media","__publicField","active","listenEvent","canUsePictureInPicture","VideoPresentation","canUseVideoPresentation","mode","prevMode","DOMEvent","type","FullscreenPresentationAdapter","_presentation","PIPPresentationAdapter","VideoProvider","HTMLMediaProvider","context","presentation","canPlayHLSNatively","ATTACH_VIDEO"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}